!function(e){function t(e){if(o)e(o);else{var t=new XMLHttpRequest;t.open("GET",m,!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response);o=t instanceof Array?t:t.posts,e(o)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}function n(e,t){return e.replace(/\{\w+\}/g,function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""})}function i(e){var t="";t=e.length?e.map(function(e){return n(g,{title:e.title,path:(c.BLOG.ROOT+"/"+e.path).replace(/\/{2}/g,"/"),date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',L.innerHTML=t}function s(e,t){return t.lastIndex=0,t.test(e)}function r(e,t){return s(e.title,t)||e.tags.some(function(e){return s(e.name,t)})||s(e.text,t)}function a(e){var n=this.value.trim();if(n){var s=new RegExp(n.replace(/[ ]/g,"|"),"gmi");t(function(e){var t=e.filter(function(e){return r(e,s)});i(t),E.show()}),e.preventDefault()}}var o,c=window||this,u=c.BLOG.even,l=(e.body,e.querySelector.bind(e)),d=(e.querySelectorAll.bind(e),l("#search")),f=l("#search-wrap"),p=l("#key"),h=l("#back"),v=l("#search-panel"),L=l("#search-result"),g=l("#search-tpl").innerHTML,m=(c.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),w=c.BLOG.noop,O=l("html"),E={show:function(){c.innerWidth<760?O.classList.add("lock-size"):w,v.classList.add("in")},hide:function(){c.innerWidth<760?O.classList.remove("lock-size"):w,v.classList.remove("in")}};d.addEventListener(u,function(){f.classList.toggle("in"),p.value="",f.classList.contains("in")?p.focus():p.blur()}),h.addEventListener(u,function(){f.classList.remove("in"),E.hide()}),document.addEventListener(u,function(e){"key"!==e.target.id&&"click"===u&&E.hide()}),p.addEventListener("input",a),p.addEventListener(u,a)}(document);
